<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">
    <head>
        <title>Home</title>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.10.2/css/all.css" />
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
        <!-- Bootstrap CSS -->
        <link rel="stylesheet" href="https://www.markuptag.com/bootstrap/5/css/bootstrap.min.css" />

        <style>
            .card-thumbnail {
        		max-height: 250px;
        		overflow: hidden;
    		}
        </style>
    </head>
    <body>
        <header>
            <nav class="navbar navbar-expand-lg navbar-dark bg-primary">
                <div class="container">
                    <ul class="navbar-nav mx-auto">
                        <li class="nav-item">
                            <a class="nav-link active" th:href="@{/}">Home</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" th:href="@{/item}">Sell Your Items</a>
                        </li>
                    </ul>
                    <div class="float-end" >
                    	<button class="btn btn-light ms-3" th:onclick="window.location.href='/signin'">Login</button>
                    	<button class="btn btn-light ms-3" th:onclick="window.location.href='/register'">Sign Up</button>
                    </div>
                </div>
            </nav>
        </header>
        
        
        <section class="bg-light py-4 my-5">
        <div class="container">
            <div class="row">
                <div class="col-12">
                    <h2 class="mb-3 text-danger">On sale</h2>
                </div>
				
                <div class="col-md-6 col-lg-4">
                    <div class="card my-3" th:each="item : ${itemsList}">
                        <div class="card-thumbnail">
                            <img src="#" class="img-fluid" alt="thumbnail">
                        </div>
                        <div class="card-body">
                            <h3 class="card-title"><a href="#" class="text-secondary" th:text="${item.name}"></a></h3>
                            <p class="card-text" th:text="${item.price}"></p>
                           	<p class="card-text" th:text="${item.stock}"></p>
                        </div>
                    </div>
                </div>

            </div>
        </div>
    </section>

        <!-- Bootstrap JS -->
        <script src="https://www.markuptag.com/bootstrap/5/js/bootstrap.bundle.min.js"></script>
    </body>
<script>
    
function sendReq() {

	$.ajax({	
		type:'GET',		
		url:"/item",		
		headers: 
	}).done(function (output, status, xhr) {
		let jwt = xhr.getResponseHeader("Authorization");
		document.cookie = `jwt=${jwt}`;
		window.location.href = '/';
	})
}
</script>
</html>